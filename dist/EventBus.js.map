{"version":3,"sources":["EventBus.ts"],"names":["EventBus","EventBus.constructor","EventBus.getSharedEventBus","EventBus.on","EventBus.fire","EventBus.remove"],"mappings":"AAGA,IAAa,QAAQ;IAMjBA,SANSA,QAAQA;QAITC,cAASA,GAAmDA,EAAEA,CAACA;QAGnEA,EAAEA,CAACA,CAACA,QAAQA,CAACA,SAASA,CAACA,CAACA,CAACA;YACrBA,MAAMA,IAAIA,KAAKA,CAACA,6BAA6BA,CAACA,CAACA;QACnDA,CAACA;QACDA,QAAQA,CAACA,SAASA,GAAGA,IAAIA,CAACA;IAC9BA,CAACA;IAEaD,0BAAiBA,GAA/BA;QACIE,EAAEA,CAACA,CAACA,QAAQA,CAACA,SAASA,KAAKA,IAAIA,CAACA,CAACA,CAACA;YAC9BA,QAAQA,CAACA,SAASA,GAAGA,IAAIA,QAAQA,EAAEA,CAACA;QACxCA,CAACA;QACDA,MAAMA,CAACA,QAAQA,CAACA,SAASA,CAACA;IAC9BA,CAACA;IAEDF,qBAAEA,GAAFA,UAAGA,OAAcA,EAAEA,QAA6BA;QAC5CG,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA;YAC3BA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,GAAGA,CAACA,QAAQA,CAACA,CAACA;YACrCA,MAAMA,CAACA;QACXA,CAACA;QAEDA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,CAACA,IAAIA,CAACA,QAAQA,CAACA,CAACA;IAC3CA,CAACA;IAEDH,uBAAIA,GAAJA,UAAKA,OAAcA,EAAEA,IAAUA;QAC3BI,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,IAAIA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA;YACpCA,IAAIA,MAAMA,GAAGA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,CAACA;YACxCA,EAAEA,CAACA,CAACA,MAAMA,CAACA,CAACA,CAACA;gBACTA,UAAUA,CAACA,MAAMA,CAACA,IAAIA,CAACA,CAACA,CAACA;YAC7BA,CAACA;QACLA,CAACA;IACLA,CAACA;IAEDJ,yBAAMA,GAANA,UAAOA,OAAcA,EAAEA,QAA6BA;QAChDK,EAAEA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA;YAC1BA,IAAIA,GAAGA,GAAWA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,CAACA,MAAMA,CAACA;YACjDA,IAAIA,YAAYA,GAA0BA,CAACA,UAACA,IAAUA;YAAWA,CAACA,CAACA,CAACA;YACpEA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,GAAGA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;gBAC3BA,IAAIA,SAASA,GAAwBA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,CAACA;gBAChEA,EAAEA,CAACA,CAACA,SAASA,KAAKA,QAAQA,CAACA,CAACA,CAACA;gBAC7BA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBACJA,YAAYA,CAACA,IAAIA,CAACA,SAASA,CAACA,CAACA;gBACjCA,CAACA;YACLA,CAACA;YACDA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,GAAGA,YAAYA,CAACA;QAC3CA,CAACA;IACLA,CAACA;IAjDcL,kBAASA,GAAaA,IAAIA,CAACA;IAkD9CA,eAACA;AAADA,CApDA,AAoDCA,IAAA;AApDY,gBAAQ,GAAR,QAoDZ,CAAA","file":"EventBus.js","sourcesContent":["import reg = require('./Registry');\n\n\nexport class EventBus {\n\n    private static _instance: EventBus = null;\n\n    private listeners: { [eventId: string]: [(data: JSON)=> void] ; } = {};\n\n    constructor() {\n        if (EventBus._instance) {\n            throw new Error('Instantiate EventBus error.');\n        }\n        EventBus._instance = this;\n    }\n\n    public static getSharedEventBus(): EventBus {\n        if (EventBus._instance === null) {\n            EventBus._instance = new EventBus();\n        }\n        return EventBus._instance;\n    }\n\n    on(eventId:string, callback:(data: JSON) => void) {\n        if (!this.listeners[eventId]) {\n            this.listeners[eventId] = [callback];\n            return;\n        }\n        //this.listeners[eventId][this.listeners[eventId].length] = callback;\n        this.listeners[eventId].push(callback);\n    }\n\n    fire(eventId:string, data?:JSON) {\n        for (var x in this.listeners[eventId]) {\n            var method = this.listeners[eventId][x];\n            if (method) {\n                setTimeout(method(data));\n            }\n        }\n    }\n\n    remove(eventId:string, callback:(data: JSON) => void) {\n        if (this.listeners[eventId]) {\n            var len: number = this.listeners[eventId].length;\n            var newcallbacks: [(data: JSON)=> void] = [(data: JSON): void=> {}];\n            for (var x = 0; x < len; x++) {\n                var _callback: (data: JSON)=> void = this.listeners[eventId][x];\n                if (_callback === callback) {\n                } else {\n                    newcallbacks.push(_callback);\n                }\n            }\n            this.listeners[eventId] = newcallbacks;\n        }\n    }\n}\n"],"sourceRoot":"/source/"}